<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ollama Model Explorer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>

<body>
    <div class="container">
        <header>
            <h1>ðŸ¦™ Ollama Model Explorer</h1>
            <p>Discover and filter models across multiple Ollama servers</p>
        </header>

        <!-- Server Configuration -->
        <div class="panel">
            <div class="panel-header">
                <svg class="panel-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M5 12h14M5 12a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v4a2 2 0 01-2 2M5 12a2 2 0 00-2 2v4a2 2 0 002 2h14a2 2 0 002-2v-4a2 2 0 00-2-2m-2-4h.01M17 16h.01" />
                </svg>
                <h2>Servers</h2>
            </div>
            <div class="server-input-group" id="serverInputs">
                <div class="server-row">
                    <input type="text" class="server-input" placeholder="http://localhost:11434"
                        value="http://localhost:11434">
                    <button class="btn btn-icon btn-danger remove-server" title="Remove server"
                        style="visibility: hidden;">
                        <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>
            </div>
            <div class="action-row">
                <button class="btn btn-secondary" id="addServerBtn">
                    <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                    </svg>
                    Add Server
                </button>
                <button class="btn btn-primary" id="fetchBtn">
                    <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                    </svg>
                    Fetch Models
                </button>
            </div>
            <div class="server-status" id="serverStatus"></div>
        </div>

        <!-- Filters -->
        <div class="panel" id="filtersPanel" style="display: none;">
            <div class="panel-header">
                <svg class="panel-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01-.293.707l-6.414 6.414a1 1 0 00-.293.707V17l-4 4v-6.586a1 1 0 00-.293-.707L3.293 7.293A1 1 0 013 6.586V4z" />
                </svg>
                <h2>Filters</h2>
                <button class="clear-filters-btn" id="clearAllFilters" style="margin-left: auto;">Clear All
                    Filters</button>
            </div>
            <div class="filters-grid">
                <div class="filter-group">
                    <h3>Search</h3>
                    <div class="search-wrapper">
                        <svg class="search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                        </svg>
                        <input type="text" class="search-input" id="searchInput" placeholder="Search model names...">
                    </div>
                </div>
                <div class="filter-group">
                    <div class="filter-group-header">
                        <h3>Capabilities</h3>
                        <span class="active-count" id="capabilityCount" style="display: none;">0</span>
                    </div>
                    <div class="filter-options" id="capabilityFilters"></div>
                </div>
                <div class="filter-group">
                    <div class="filter-group-header">
                        <h3>Model Family</h3>
                        <span class="active-count" id="familyCount" style="display: none;">0</span>
                    </div>
                    <div class="filter-options" id="familyFilters"></div>
                </div>
                <div class="filter-group">
                    <div class="filter-group-header">
                        <h3>Server</h3>
                        <span class="active-count" id="serverCount" style="display: none;">0</span>
                    </div>
                    <div class="filter-options" id="serverFilters"></div>
                </div>
            </div>
            <div class="match-mode">
                <label>Match mode:</label>
                <span style="color: var(--text-muted); font-size: 0.875rem;">Any</span>
                <label class="toggle-switch">
                    <input type="checkbox" id="matchAllToggle">
                    <span class="toggle-slider"></span>
                </label>
                <span style="color: var(--text-muted); font-size: 0.875rem;">All</span>
                <span style="color: var(--text-secondary); font-size: 0.8rem; margin-left: 0.5rem;">(for
                    capabilities)</span>
            </div>
        </div>

        <!-- Results -->
        <div class="panel" id="resultsPanel" style="display: none;">
            <div class="results-header">
                <div class="results-count" id="resultsCount"></div>
                <div class="results-controls">
                    <select class="sort-select" id="sortSelect">
                        <option value="name-asc">Name (A-Z)</option>
                        <option value="name-desc">Name (Z-A)</option>
                        <option value="size-asc">Size (smallest)</option>
                        <option value="size-desc">Size (largest)</option>
                        <option value="modified-desc">Recently modified</option>
                        <option value="modified-asc">Oldest modified</option>
                    </select>
                    <div class="view-toggle">
                        <button class="active" data-view="grid" title="Grid view">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
                            </svg>
                        </button>
                        <button data-view="list" title="List view">
                            <svg width="18" height="18" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 6h16M4 12h16M4 18h16" />
                            </svg>
                        </button>
                    </div>
                    <!-- Export Dropdown -->
                    <div class="export-dropdown" id="exportDropdown">
                        <button class="export-btn" id="exportBtn" title="Export results">
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                            </svg>
                            Export
                            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                style="width:12px;height:12px;margin-left:0.25rem;">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M19 9l-7 7-7-7" />
                            </svg>
                        </button>
                        <div class="export-menu">
                            <button class="export-menu-item" data-format="json">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4" />
                                </svg>
                                JSON
                            </button>
                            <button class="export-menu-item" data-format="csv">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 17v-2m3 2v-4m3 4v-6m2 10H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                </svg>
                                CSV
                            </button>
                            <button class="export-menu-item" data-format="markdown">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                </svg>
                                Markdown
                            </button>
                            <div class="export-menu-divider"></div>
                            <button class="export-menu-item" data-format="clipboard">
                                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3" />
                                </svg>
                                Copy to Clipboard
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="model-grid" id="modelGrid"></div>
        </div>

        <!-- Initial State -->
        <div class="status-message" id="initialState">
            <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                    d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" />
            </svg>
            <h3>Welcome to Ollama Model Explorer</h3>
            <p>Add your Ollama server URLs above and click "Fetch Models" to get started.</p>
        </div>

        <!-- Loading State -->
        <div class="loading-overlay" id="loadingState" style="display: none;">
            <div class="loading-spinner"></div>
            <span>Fetching models from servers...</span>
        </div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>

</html>